# å›½å†…æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## æ¨èæ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šè…¾è®¯äº‘é¦™æ¸¯ï¼ˆæ¨èï¼Œæ— éœ€å¤‡æ¡ˆï¼‰

**ä¼˜åŠ¿ï¼š**
- ä¸éœ€è¦å¤‡æ¡ˆï¼Œç«‹å³å¯ç”¨
- å›½å†…è®¿é—®é€Ÿåº¦å¿«
- ä»·æ ¼åˆç†

**é…ç½®æ¨èï¼š**
- è½»é‡åº”ç”¨æœåŠ¡å™¨
- åœ°åŸŸï¼šé¦™æ¸¯
- é…ç½®ï¼š2æ ¸4G
- å¸¦å®½ï¼š5M
- ä»·æ ¼ï¼šçº¦120å…ƒ/æœˆ

**è´­ä¹°é“¾æ¥ï¼š** https://cloud.tencent.com/product/lighthouse

---

### æ–¹æ¡ˆBï¼šé˜¿é‡Œäº‘é¦™æ¸¯

**ä¼˜åŠ¿ï¼š**
- ç¨³å®šæ€§å¥½
- ä¸éœ€è¦å¤‡æ¡ˆ

**é…ç½®æ¨èï¼š**
- è½»é‡åº”ç”¨æœåŠ¡å™¨
- åœ°åŸŸï¼šé¦™æ¸¯
- é…ç½®ï¼š2æ ¸4G
- ä»·æ ¼ï¼šçº¦150å…ƒ/æœˆ

**è´­ä¹°é“¾æ¥ï¼š** https://www.aliyun.com/product/swas

---

## éƒ¨ç½²æ­¥éª¤ï¼ˆè¯¦ç»†ç‰ˆï¼‰

### ç¬¬ä¸€æ­¥ï¼šè´­ä¹°æœåŠ¡å™¨

1. æ³¨å†Œè…¾è®¯äº‘/é˜¿é‡Œäº‘è´¦å·
2. é€‰æ‹©"è½»é‡åº”ç”¨æœåŠ¡å™¨"
3. åœ°åŸŸé€‰æ‹©"é¦™æ¸¯"
4. é•œåƒé€‰æ‹©"Ubuntu 20.04"
5. é…ç½®é€‰æ‹©"2æ ¸4G"
6. è´­ä¹°

### ç¬¬äºŒæ­¥ï¼šè¿æ¥æœåŠ¡å™¨

```bash
# ä½¿ç”¨SSHè¿æ¥ï¼ˆå¯†ç åœ¨è´­ä¹°æ—¶è®¾ç½®ï¼‰
ssh root@ä½ çš„æœåŠ¡å™¨IP

# æˆ–ä½¿ç”¨è…¾è®¯äº‘/é˜¿é‡Œäº‘çš„ç½‘é¡µç»ˆç«¯
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ç¯å¢ƒ

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£…Python 3.10
apt install python3 python3-pip python3-venv -y

# å®‰è£…Git
apt install git -y

# å®‰è£…Nginxï¼ˆç”¨äºåå‘ä»£ç†ï¼‰
apt install nginx -y

# å®‰è£…Supervisorï¼ˆç”¨äºè¿›ç¨‹ç®¡ç†ï¼‰
apt install supervisor -y
```

### ç¬¬å››æ­¥ï¼šä¸Šä¼ ä»£ç 

**æ–¹æ³•1ï¼šä½¿ç”¨Gitï¼ˆæ¨èï¼‰**
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /var/www
cd /var/www

# å…‹éš†ä»£ç ï¼ˆå¦‚æœä½ æœ‰Gitä»“åº“ï¼‰
git clone ä½ çš„ä»“åº“åœ°å€ ecommerce-ai

# æˆ–è€…æ‰‹åŠ¨ä¸Šä¼ 
```

**æ–¹æ³•2ï¼šä½¿ç”¨SCPä¸Šä¼ **
```bash
# åœ¨æœ¬åœ°ç”µè„‘æ‰§è¡Œ
scp -r /root/.openclaw-claude/workspace/ecommerce-ai-v2 root@æœåŠ¡å™¨IP:/var/www/ecommerce-ai
```

### ç¬¬äº”æ­¥ï¼šå®‰è£…ä¾èµ–

```bash
cd /var/www/ecommerce-ai

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### ç¬¬å…­æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
# åˆ›å»º.envæ–‡ä»¶
nano .env

# å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
DEEPSEEK_API_KEY=ä½ çš„DeepSeekå¯†é’¥
SECRET_KEY=éšæœºç”Ÿæˆçš„å¯†é’¥ï¼ˆè‡³å°‘32ä½ï¼‰
DATABASE_URL=sqlite:///./ecommerce_ai.db
```

ç”ŸæˆSECRET_KEYï¼š
```bash
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

### ç¬¬ä¸ƒæ­¥ï¼šé…ç½®Supervisorï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
nano /etc/supervisor/conf.d/ecommerce-ai.conf

# å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
[program:ecommerce-ai]
directory=/var/www/ecommerce-ai
command=/var/www/ecommerce-ai/venv/bin/python main.py
user=root
autostart=true
autorestart=true
stderr_logfile=/var/log/ecommerce-ai.err.log
stdout_logfile=/var/log/ecommerce-ai.out.log
environment=PATH="/var/www/ecommerce-ai/venv/bin"

# é‡å¯Supervisor
supervisorctl reread
supervisorctl update
supervisorctl start ecommerce-ai

# æŸ¥çœ‹çŠ¶æ€
supervisorctl status
```

### ç¬¬å…«æ­¥ï¼šé…ç½®Nginxï¼ˆåå‘ä»£ç†ï¼‰

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
nano /etc/nginx/sites-available/ecommerce-ai

# å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š
server {
    listen 80;
    server_name ä½ çš„æœåŠ¡å™¨IP;  # æˆ–åŸŸå

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/ecommerce-ai /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
nginx -t

# é‡å¯Nginx
systemctl restart nginx
```

### ç¬¬ä¹æ­¥ï¼šé…ç½®é˜²ç«å¢™

```bash
# å…è®¸HTTPå’ŒHTTPS
ufw allow 80
ufw allow 443
ufw allow 22  # SSH

# å¯ç”¨é˜²ç«å¢™
ufw enable
```

### ç¬¬åæ­¥ï¼šæµ‹è¯•

```bash
# è®¿é—®
http://ä½ çš„æœåŠ¡å™¨IP

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/ecommerce-ai.out.log
tail -f /var/log/ecommerce-ai.err.log
```

---

## å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
supervisorctl status ecommerce-ai
```

### é‡å¯æœåŠ¡
```bash
supervisorctl restart ecommerce-ai
```

### åœæ­¢æœåŠ¡
```bash
supervisorctl stop ecommerce-ai
```

### æŸ¥çœ‹æ—¥å¿—
```bash
tail -f /var/log/ecommerce-ai.out.log
```

### æ›´æ–°ä»£ç 
```bash
cd /var/www/ecommerce-ai
git pull  # å¦‚æœç”¨Git
supervisorctl restart ecommerce-ai
```

---

## é…ç½®HTTPSï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

```bash
# å®‰è£…Certbot
apt install certbot python3-certbot-nginx -y

# è·å–SSLè¯ä¹¦ï¼ˆéœ€è¦åŸŸåï¼‰
certbot --nginx -d ä½ çš„åŸŸå

# è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

---

## æ•°æ®åº“å¤‡ä»½ï¼ˆé‡è¦ï¼‰

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
nano /root/backup.sh

# å¡«å…¥ï¼š
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
cp /var/www/ecommerce-ai/ecommerce_ai.db /root/backups/ecommerce_ai_$DATE.db
# ä¿ç•™æœ€è¿‘7å¤©çš„å¤‡ä»½
find /root/backups -name "ecommerce_ai_*.db" -mtime +7 -delete

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x /root/backup.sh

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p /root/backups

# æ·»åŠ åˆ°å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨3ç‚¹å¤‡ä»½ï¼‰
crontab -e
# æ·»åŠ ï¼š
0 3 * * * /root/backup.sh
```

---

## ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹ç³»ç»Ÿèµ„æº
```bash
# CPUå’Œå†…å­˜
htop

# ç£ç›˜ç©ºé—´
df -h

# ç½‘ç»œè¿æ¥
netstat -tulpn
```

### æŸ¥çœ‹è®¿é—®æ—¥å¿—
```bash
tail -f /var/log/nginx/access.log
```

---

## æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/log/ecommerce-ai.err.log

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep 8000

# æ‰‹åŠ¨è¿è¡Œæµ‹è¯•
cd /var/www/ecommerce-ai
source venv/bin/activate
python main.py
```

### æ•°æ®åº“é”™è¯¯
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la /var/www/ecommerce-ai/ecommerce_ai.db

# ä¿®å¤æƒé™
chown root:root /var/www/ecommerce-ai/ecommerce_ai.db
```

---

## æ€§èƒ½ä¼˜åŒ–

### ä½¿ç”¨PostgreSQLï¼ˆå¯é€‰ï¼‰
```bash
# å®‰è£…PostgreSQL
apt install postgresql postgresql-contrib -y

# åˆ›å»ºæ•°æ®åº“
sudo -u postgres psql
CREATE DATABASE ecommerce_ai;
CREATE USER ecommerce_user WITH PASSWORD 'ä½ çš„å¯†ç ';
GRANT ALL PRIVILEGES ON DATABASE ecommerce_ai TO ecommerce_user;
\q

# ä¿®æ”¹.env
DATABASE_URL=postgresql://ecommerce_user:ä½ çš„å¯†ç @localhost/ecommerce_ai
```

### é…ç½®Redisç¼“å­˜ï¼ˆå¯é€‰ï¼‰
```bash
# å®‰è£…Redis
apt install redis-server -y

# å¯åŠ¨Redis
systemctl start redis
systemctl enable redis
```

---

## æˆæœ¬ä¼°ç®—

### è…¾è®¯äº‘é¦™æ¸¯
- æœåŠ¡å™¨ï¼š120å…ƒ/æœˆ
- å¸¦å®½ï¼šåŒ…å«åœ¨å†…
- **æ€»è®¡ï¼šçº¦120å…ƒ/æœˆ**

### é˜¿é‡Œäº‘é¦™æ¸¯
- æœåŠ¡å™¨ï¼š150å…ƒ/æœˆ
- å¸¦å®½ï¼šåŒ…å«åœ¨å†…
- **æ€»è®¡ï¼šçº¦150å…ƒ/æœˆ**

### å…¶ä»–æˆæœ¬
- DeepSeek APIï¼šæŒ‰ä½¿ç”¨é‡è®¡è´¹ï¼ˆå¾ˆä¾¿å®œï¼Œçº¦10-50å…ƒ/æœˆï¼‰
- åŸŸåï¼šçº¦50-100å…ƒ/å¹´ï¼ˆå¯é€‰ï¼‰
- SSLè¯ä¹¦ï¼šå…è´¹ï¼ˆLet's Encryptï¼‰

**é¢„è®¡æ€»æˆæœ¬ï¼š150-200å…ƒ/æœˆ**

---

## è”ç³»æ–¹å¼

éƒ¨ç½²é‡åˆ°é—®é¢˜ï¼Ÿéšæ—¶é—®æˆ‘ï¼

**é¡¹ç›®ä½ç½®ï¼š** `/root/.openclaw-claude/workspace/ecommerce-ai-v2/`

**å‡†å¤‡å¥½äº†å°±å¯ä»¥éƒ¨ç½²ï¼ğŸš€**
